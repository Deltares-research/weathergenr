% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/knn_sample.R
\name{knn_sample}
\alias{knn_sample}
\title{K-Nearest Neighbor (KNN) Sampling from Candidates}
\usage{
knn_sample(
  candidates,
  target,
  k,
  n = 1,
  prob = FALSE,
  weights = NULL,
  seed = NULL,
  sampling = c("rank", "distance"),
  bandwidth = NULL,
  epsilon = 1e-08
)
}
\arguments{
\item{candidates}{Numeric matrix or data frame. Each row is a candidate vector.}

\item{target}{Numeric vector. The target vector for comparison.}

\item{k}{Integer. Number of nearest neighbors to consider (\eqn{k \leq} number of candidates).}

\item{n}{Integer. Number of samples to draw (default = 1).}

\item{prob}{Logical. If \code{TRUE}, sampling probabilities decrease with neighbor rank; if \code{FALSE}, sampling is uniform (default).}

\item{weights}{Optional numeric vector of length equal to \code{ncol(candidates)}. Feature weights for distance calculation.}

\item{seed}{Optional integer. If provided, sets random seed for reproducible sampling.}
}
\value{
Integer vector of length \code{n}, giving indices of sampled candidates (rows of \code{candidates}).
}
\description{
Given a set of candidate vectors and a target vector, selects indices of the \code{k} nearest candidates
(using weighted Euclidean distance) to the target, then samples \code{n} indices from these neighbors,
either uniformly or with rank-based probabilities favoring closer neighbors. Optionally, a random seed can be set
for reproducibility.
}
\details{
The function computes the weighted Euclidean distance between each candidate and the target. The \code{k}
nearest neighbors (smallest distances) are identified. If \code{prob = TRUE}, the closest neighbor has the highest
probability (\code{1}), the second-closest half that, and so on (probabilities sum to 1). If \code{prob = FALSE},
all \code{k} neighbors are sampled with equal probability. Sampling is with replacement.
If \code{seed} is set, the random seed will be temporarily changed and restored on exit.
}
\examples{
set.seed(42)
candidates <- matrix(rnorm(50), ncol = 2)
target <- c(0, 0)

# Sample 1 index from 5 nearest neighbors, uniform probability
knn_sample(candidates, target, k = 5, n = 1)

# Sample 3 indices from 5 nearest neighbors, rank-weighted probability, with seed
knn_sample(candidates, target, k = 5, n = 3, prob = TRUE, seed = 123)

# Using feature weights
knn_sample(candidates, target, k = 5, n = 2, weights = c(2, 1), seed = 10)

}
