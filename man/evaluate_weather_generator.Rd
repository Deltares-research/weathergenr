% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evaluate_generator.R
\name{evaluate_weather_generator}
\alias{evaluate_weather_generator}
\title{Evaluate Stochastic Weather Generator Performance}
\usage{
evaluate_weather_generator(
  daily_sim = NULL,
  daily_obs = NULL,
  variables = NULL,
  variable_labels = NULL,
  n_realizations = NULL,
  wet_quantile = 0.2,
  extreme_quantile = 0.8,
  output_dir = NULL,
  save_plots = TRUE,
  show_title = TRUE,
  verbose = TRUE,
  max_grids = 25,
  seed = NULL
)
}
\arguments{
\item{daily_sim}{List of simulated weather realizations. Each element should be
a list of data frames (one per grid cell), containing daily values and a `date` column.}

\item{daily_obs}{List of observed weather data frames (one per grid cell). Each
should contain a `date` column and the variables specified in `variables`.}

\item{variables}{Character vector of variable names to evaluate (e.g., `c("precip", "temp")`).
Must include "precip" for wet/dry spell analysis.}

\item{variable_labels}{Optional character vector of variable labels for plots.
Defaults to `variables` if `NULL`.}

\item{n_realizations}{Integer. Number of synthetic realizations in `daily_sim`.}

\item{wet_quantile}{Numeric between 0 and 1. Quantile threshold for wet days
(default = 0.2).}

\item{extreme_quantile}{Numeric between 0 and 1. Quantile threshold for extremely
wet days (default = 0.8).}

\item{output_dir}{Character. Directory path to save generated plots. If `NULL`,
plots are not saved to disk.}

\item{save_plots}{Logical. Whether to save plots to `output_dir` (default = `TRUE`).}

\item{show_title}{Logical. Whether to display titles in plots (default = `TRUE`).}

\item{verbose}{Logical. Whether to emit console messages and the fit summary table.}

\item{max_grids}{Integer. Maximum number of grid cells to evaluate (default = 25).
If more grids are provided, a random subsample is used to control memory.}

\item{seed}{Optional integer. Random seed for reproducible grid subsampling and
year window selection. If NULL, results will vary between runs.}
}
\value{
A named list of `ggplot2` plot objects with class "weather_assessment".
  The returned object also contains attributes:
  \itemize{
    \item \code{fit_summary}: data frame of per-realization fit metrics and ranks.
    \item \code{metadata}: list with \code{n_grids}, \code{n_realizations},
      \code{variables}, and \code{assessment_date}.
  }
}
\description{
Run a comprehensive diagnostic evaluation comparing synthetic weather
simulations against historical observations across multiple grid cells.
Computes summary statistics, wet/dry day counts, spell lengths, and
inter-site correlations, and generates diagnostic plots to assess
stochastic weather generator performance.
}
\details{
The function standardizes simulated and observed series to full-year windows
(after leap-day removal), optionally subsamples grid cells to manage memory,
and returns diagnostic plots alongside a summarized fit table. Missing values
are ignored in summary statistics (`na.rm = TRUE`), and correlations use
pairwise complete observations. Use `seed` for reproducible subsampling and
window selection; the original RNG state is restored on exit.
}
\examples{
set.seed(1)
dates <- seq.Date(as.Date("2001-01-01"), as.Date("2001-12-31"), by = "day")
dates <- dates[format(dates, "\%m-\%d") != "02-29"]
obs_grid <- list(data.frame(
  date = dates,
  precip = rgamma(length(dates), shape = 2, scale = 2),
  temp = rnorm(length(dates), mean = 10, sd = 3)
))
sim_grid <- list(list(data.frame(
  date = dates,
  precip = rgamma(length(dates), shape = 2, scale = 2),
  temp = rnorm(length(dates), mean = 10, sd = 3)
)))
out <- evaluate_weather_generator(
  daily_sim = sim_grid,
  daily_obs = obs_grid,
  variables = c("precip", "temp"),
  n_realizations = 1,
  output_dir = NULL,
  save_plots = FALSE,
  show_title = FALSE
)
class(out)

}
